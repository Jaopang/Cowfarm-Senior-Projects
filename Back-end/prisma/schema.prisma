generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = "mysql://root:password@35.187.238.249:3306/farm"
}

model User {
  id        Int     @id @default(autoincrement())
  email     String  @unique
  name      String?
  password  String
  lineId    String?
  userImage String? @db.LongText
  farm      Farm?
}

model Farm {
  id        Int      @id @default(autoincrement())
  farmName  String
  createdAt DateTime @default(now()) @updatedAt
  user      User     @relation(fields: [userId], references: [id])
  userId    Int      @unique
  cows      Cow[]
}

model Cow {
  id         Int       @id @default(autoincrement())
  cowImage   String?   @db.LongText
  cowName    String
  dobCow     DateTime  @default(now()) @updatedAt
  sex        String
  detail     String
  farm       Farm      @relation(fields: [farmId], references: [id])
  farmId     Int
  cowEvent   CowEvent? @relation(fields: [cowEventId], references: [id])
  cowEventId Int?      @unique
}

model CowEvent {
  id           Int      @id @default(autoincrement())
  cowImage     String?  @db.LongText
  cowName      String   @db.VarChar(150)
  dobCow       DateTime
  sex          String
  detail       String
  semen        String   @db.VarChar(150)
  breed        DateTime @default(now()) @updatedAt
  heat         DateTime @default(now()) @updatedAt
  pregnacyTest String
  maternity    String
  cow          Cow?
}
